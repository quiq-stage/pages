<!-- See https://developers.goquiq.com/docs/ui-extensions/ for more info -->
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Cache-Control" content="no-cache" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>FlightHub RHS</title>
</head>

<script src="https://flighthub-stage.goquiq.com/app/ui-extensions/sdk.js"></script>

<script type="text/javascript">
  Quiq.on("init", function (data) {
    var conversation = Quiq.getConversation();
    window.parent.postMessage(
      {
        type: "SERVICEDESK_OPEN_TICKET", 
        conversation.custom.servicedeskTicketNumber, 
        callSid: attributes.call_sid
      },
      "*" // You can replace * with your CRM domain for security
    );
  });

  /*
  async init(flex: typeof Flex, manager: Flex.Manager): Promise<void> {
    flex.Actions.addListener("afterAcceptTask", (payload) => {
      try {
        const { attributes } = payload. task;
        const ticketNumber = attributes.servicedeskTicketNumber || "unknown";
        
        window.parent.postMessage(
          {
            type: "SERVICEDESK_OPEN_TICKET", 
            ticketNumber, 
            callSid: attributes.call_sid
          },
          "*" // You can replace * with your CRM domain for security
        );
    }  catch (err) {}
        console.error ("Error posting OPEN_TICKET message:", err);
    }
  }
  */
</script>
  
<body>


</body>
</html>
